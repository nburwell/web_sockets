<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Web Sockets Demo :: Burwell Designs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
    </style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script type="text/javascript">
  var socket_wrapper, socket_view;

function setup()
{
  if ( WebSocket ) {
    $('.if-web-sockets').show();
  }
  else {
    $('.no-web-sockets').show();
  }
  
  socket_wrapper = new SocketWrapper( { host : 'localhost', port : 8080 } );
  socket_wrapper.on( 'socket:connect', function() {
    console.log( "Connected, biyatches" );
  } );
  
  socket_wrapper.on( 'socket:error', function() {
    console.log( "Could not connect" );
  } );
  
  socket_wrapper.on( 'socket:message', function( msg ) {
    console.log( "MESSAGE: " + msg );
  })
  
  
  socket_view = new SocketView( { model: socket_wrapper } );
  $('#connect').append( socket_view.$el );
  
  socket_view.render();
};


$( function() {
  setup();
} );

$(window).unload( function() {
  socket.close();
})

</script>

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Web Sockets Demo</a>
          
          <div class="nav-collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="well">
            <h1>Server Connection</h1>
            
            <div class="alert alert-success if-web-sockets" style="display:none">
              Your browser supports web sockets.
            </div>
            
            <div class="alert alert-error no-web-sockets" style="display:none">
              Sorry, your browser does not support web sockets. Please download Chrome or Firefox.
            </div>

            <p>Configured to connect to the following: <br />
               <code>ws://localhost:8080</code>
            </p>
            
            <p style="margin-top: 1.5em" id="connect">
            </p>
          </div>
        </div>
        
        <div class="span9">
          <div class="row-fluid">
            <div class="span4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="span4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="span4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
          </div><!--/row-->
          
        </div><!--/span-->
      </div><!--/row-->

      <hr>

      <footer>
        <p>&copy; 2012 Burwell Designs</p>
      </footer>

    </div><!--/.fluid-container-->
    
    <!-- TEMPLATES -->
    
    <script type="text/html" id="template-socket-connection">
      <a class="btn btn-primary <%= connected ? 'disabled' : '' %>"><i class="icon-cog icon-white"></i> Connect</a>
      <a class="btn btn-danger  <%= connected ? '' : 'disabled' %>"><i class="icon-remove icon-white"></i> Disconnect</a>
    </script>
    
    <script type="text/html" id="template-socket-message">
      <div class='alert alert-info'>
        <h4><%= name %></h4>
        <p><%= details %></p>
      </div>
    </script>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/bootstrap.js"></script>
    <script src="js/backbone.js"></script>
    <script src="js/socket.js"></script>
    <script src="js/views/socket.js"></script>

  </body>
</html>
